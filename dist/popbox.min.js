/*!
 * popbox - Fidel Tooltip/Popover Library
 * v0.1.0
 * https://github.com/jgallen23/popbox
 * copyright Greg Allen 2013
 * MIT License
*/
(function(t){t.declare("popbox",{defaults:{containerClass:"Popbox",direction:"left",hideFadeDuration:100,showFadeDuration:50,hideTimeout:500,enableHover:!0,clickToShow:!0},init:function(){this.open=!1,this.hoveringOverTooltip=!1,this.hideTimer=null,this.text=this.el.data("popbox-text")||"",this.title=this.el.data("popbox-title")||"",this.templateEl=this.el.data("popbox-el")||"",this.direction=this.el.data("popbox-direction")||this.direction,this.template="",this.attachEvents()},isOpen:function(){return this.open},attachEvents:function(){this.enableHover&&(this.el.bind("mouseenter",this.proxy(this.show)),this.el.bind("mouseleave",this.proxy(this.hide)))},reset:function(){this.template.unbind("mouseenter"),this.template.unbind("mouseleave"),this.template.remove()},show:function(e){this.hoveringOverTooltip||void 0!==e&&this.forcedOpen||(e===void 0&&(this.forcedOpen=!0),clearTimeout(this.hideTimer),this.open||(t("body").append(this.generateTemplate()),this.template.bind("mouseenter",this.proxy(this.hoverTooltip)),this.template.bind("mouseleave",this.proxy(this.hoverLeaveTooltip)),this.template.hide().fadeIn(this.showFadeDuration),this.position()),this.open=!0,this.el.trigger("show"))},hide:function(t){this.hoveringOverTooltip||this.open&&(void 0!==t&&this.forcedOpen||(t===void 0&&(this.forcedOpen=!1),this.hideTimer=setTimeout(this.proxy(function(){this.template.fadeOut(this.hideFadeDuration,this.proxy(this.reset))}),this.hideTimeout),this.open=!1,this.el.trigger("hide")))},toggle:function(){return this.clickToShow?(this.open?this.hide():this.show(),!1):void 0},position:function(){this.template.css({position:"absolute"});var t=this.el.offset();switch(this.direction){case"left":this.template.css({left:t.left-this.template.outerWidth(),top:t.top+this.el.outerHeight()/2-this.template.outerHeight()/2}),this.template.addClass("left");break;case"up":this.template.css({left:t.left+this.el.outerWidth()/2-this.template.outerWidth()/2,top:t.top-this.template.outerHeight()}),this.template.addClass("up");break;case"right":this.template.css({left:t.left+this.el.outerWidth(),top:t.top+this.el.outerHeight()/2-this.template.outerHeight()/2}),this.template.addClass("right");break;case"down":this.template.css({left:t.left+this.el.outerWidth()/2-this.template.outerWidth()/2,top:t.top+this.el.outerHeight()}),this.template.addClass("down")}},generateTemplate:function(){if(this.template)return this.template;var e=t(document.createElement("div")),i=t(document.createElement("div")),s=t(document.createElement("div"));return e.addClass(this.containerClass),this.templateEl?e.append(t(this.templateEl).html()):(this.title&&(i.addClass("title"),i.html(this.title),e.append(i)),this.text&&(s.addClass("text"),s.html(this.text),e.append(s))),this.template=e,this.template},hoverTooltip:function(){clearTimeout(this.hideTimer),this.hoveringOverTooltip=!0},hoverLeaveTooltip:function(){this.hoveringOverTooltip=!1,this.el.trigger("mouseleave")}})})(jQuery);